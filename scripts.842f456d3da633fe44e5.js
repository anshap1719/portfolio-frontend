!function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){return r(t[s][1][e]||e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";function n(e){var t;this.getElement(e.element),this.x1=0,this.y1=0,this.name=e.name||!1,this.elToSetClassOn=e.elToSetClassOn||"body",this.direction=e.direction||"diagonal",this.isPausedWhenNotInView=e.isPausedWhenNotInView||!1,this.opacity=e.opacity,this.states=e.states,this.stateTransitionSpeed=e.stateTransitionSpeed||1e3,this.previousTimeStamp=null,this.progress=0,this.isPaused=!1,this.isCleared=!1,this.isPausedBecauseNotInView=!1,this.iscurrentColorsSet=!1,this.context=this.canvas.getContext("2d"),this.channels={},this.channelsIndex=0,this.activeState=e.defaultStateName||"default-state",this.isChangingState=!1,this.activeColors=[],this.activeColorDiff=[],this.activetransitionSpeed=null,this.currentColors=[],this.eventPolyfill(),this.scrollDebounceThreshold=e.scrollDebounceThreshold||300,this.scrollDebounceTimeout=null,this.isImgLoaded=!1,this.isCanvasInWindowView=!1,this.firstScrollInit=!0,this.animating=!1,e.image&&e.image.source&&(this.image={source:e.image.source,position:e.image.position||["center","center"],stretchMode:e.image.stretchMode||!1,blendingMode:e.image.blendingMode||!1}),t=-1!==this.opacity.map(function(e){return 1!==e}).indexOf(!0),this.shouldClearCanvasOnEachFrame=!!this.image||t,this.events={start:new CustomEvent("granim:start"),end:new CustomEvent("granim:end"),gradientChange:function(e){return new CustomEvent("granim:gradientChange",{detail:{isLooping:e.isLooping,colorsFrom:e.colorsFrom,colorsTo:e.colorsTo,activeState:e.activeState},bubbles:!1,cancelable:!1})}},this.callbacks={onStart:"function"==typeof e.onStart&&e.onStart,onGradientChange:"function"==typeof e.onGradientChange&&e.onGradientChange,onEnd:"function"==typeof e.onEnd&&e.onEnd},this.getDimensions(),this.canvas.setAttribute("width",this.x1),this.canvas.setAttribute("height",this.y1),this.setColors(),this.image&&(this.validateInput("image"),this.prepareImage()),this.pauseWhenNotInViewNameSpace=this.pauseWhenNotInView.bind(this),this.setSizeAttributesNameSpace=this.setSizeAttributes.bind(this),this.onResize(),this.isPausedWhenNotInView?this.onScroll():this.image||(this.refreshColors(),this.animation=requestAnimationFrame(this.animateColors.bind(this)),this.animating=!0),this.callbacks.onStart&&this.callbacks.onStart(),this.canvas.dispatchEvent(this.events.start)}n.prototype.onResize=e("./onResize.js"),n.prototype.onScroll=e("./onScroll.js"),n.prototype.validateInput=e("./validateInput.js"),n.prototype.triggerError=e("./triggerError.js"),n.prototype.prepareImage=e("./prepareImage.js"),n.prototype.eventPolyfill=e("./eventPolyfill.js"),n.prototype.colorDiff=e("./colorDiff.js"),n.prototype.hexToRgb=e("./hexToRgb.js"),n.prototype.setDirection=e("./setDirection.js"),n.prototype.setColors=e("./setColors.js"),n.prototype.getElement=e("./getElement.js"),n.prototype.getDimensions=e("./getDimensions.js"),n.prototype.getLightness=e("./getLightness.js"),n.prototype.getCurrentColors=e("./getCurrentColors.js"),n.prototype.animateColors=e("./animateColors.js"),n.prototype.refreshColors=e("./refreshColors.js"),n.prototype.makeGradient=e("./makeGradient.js"),n.prototype.pause=e("./pause.js"),n.prototype.play=e("./play.js"),n.prototype.clear=e("./clear.js"),n.prototype.destroy=e("./destroy.js"),n.prototype.pauseWhenNotInView=e("./pauseWhenNotInView.js"),n.prototype.setSizeAttributes=e("./setSizeAttributes.js"),n.prototype.changeDirection=e("./changeDirection.js"),n.prototype.changeBlendingMode=e("./changeBlendingMode.js"),n.prototype.changeState=e("./changeState.js"),t.exports=n},{"./animateColors.js":2,"./changeBlendingMode.js":3,"./changeDirection.js":4,"./changeState.js":5,"./clear.js":6,"./colorDiff.js":7,"./destroy.js":8,"./eventPolyfill.js":9,"./getCurrentColors.js":10,"./getDimensions.js":11,"./getElement.js":12,"./getLightness.js":13,"./hexToRgb.js":14,"./makeGradient.js":15,"./onResize.js":16,"./onScroll.js":17,"./pause.js":18,"./pauseWhenNotInView.js":19,"./play.js":20,"./prepareImage.js":21,"./refreshColors.js":22,"./setColors.js":23,"./setDirection.js":24,"./setSizeAttributes.js":25,"./triggerError.js":26,"./validateInput.js":27}],2:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n,r=void 0===this.states[this.activeState].loop||this.states[this.activeState].loop;(null===this.previousTimeStamp||e-this.previousTimeStamp>100)&&(this.previousTimeStamp=e),this.progress=this.progress+(e-this.previousTimeStamp),t=(this.progress/this.activetransitionSpeed*100).toFixed(2),this.previousTimeStamp=e,this.refreshColors(t),t<100?this.animation=requestAnimationFrame(this.animateColors.bind(this)):this.channelsIndex<this.states[this.activeState].gradients.length-2||r?(this.isChangingState&&(this.activetransitionSpeed=this.states[this.activeState].transitionSpeed||5e3),this.previousTimeStamp=null,this.progress=0,this.channelsIndex++,i=!1,this.channelsIndex===this.states[this.activeState].gradients.length-1?i=!0:this.channelsIndex===this.states[this.activeState].gradients.length&&(this.channelsIndex=0),n=void 0===this.states[this.activeState].gradients[this.channelsIndex+1]?this.states[this.activeState].gradients[0]:this.states[this.activeState].gradients[this.channelsIndex+1],this.setColors(),this.animation=requestAnimationFrame(this.animateColors.bind(this)),this.callbacks.onGradientChange&&this.callbacks.onGradientChange({isLooping:i,colorsFrom:this.states[this.activeState].gradients[this.channelsIndex],colorsTo:n,activeState:this.activeState}),this.canvas.dispatchEvent(this.events.gradientChange({isLooping:i,colorsFrom:this.states[this.activeState].gradients[this.channelsIndex],colorsTo:n,activeState:this.activeState}))):(cancelAnimationFrame(this.animation),this.callbacks.onEnd&&this.callbacks.onEnd(),this.canvas.dispatchEvent(new CustomEvent("granim:end")))}},{}],3:[function(e,t,i){"use strict";t.exports=function(e){this.context.clearRect(0,0,this.x1,this.y1),this.context.globalCompositeOperation=this.image.blendingMode=e,this.validateInput("blendingMode"),this.isPaused&&this.refreshColors()}},{}],4:[function(e,t,i){"use strict";t.exports=function(e){this.context.clearRect(0,0,this.x1,this.y1),this.direction=e,this.validateInput("direction"),this.isPaused&&this.refreshColors()}},{}],5:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n=this;this.activeState!==e&&(this.isPaused||(this.isPaused=!0,this.pause()),this.channelsIndex=-1,this.activetransitionSpeed=this.stateTransitionSpeed,this.activeColorDiff=[],this.activeColors=this.getCurrentColors(),this.progress=0,this.previousTimeStamp=null,this.isChangingState=!0,this.states[e].gradients[0].forEach(function(r,o,s){t=n.hexToRgb(n.states[e].gradients[0][o]),i=n.colorDiff(n.activeColors[o],t),n.activeColorDiff.push(i)}),this.activeState=e,this.play())}},{}],6:[function(e,t,i){"use strict";t.exports=function(){this.isPaused?this.isPaused=!1:cancelAnimationFrame(this.animation),this.isCleared=!0,this.context.clearRect(0,0,this.x1,this.y1)}},{}],7:[function(e,t,i){"use strict";t.exports=function(e,t){var i,n=[];for(i=0;i<3;i++)n.push(t[i]-e[i]);return n}},{}],8:[function(e,t,i){"use strict";t.exports=function(){this.onResize("removeListeners"),this.onScroll("removeListeners"),this.clear()}},{}],9:[function(e,t,i){"use strict";t.exports=function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}},{}],10:[function(e,t,i){"use strict";t.exports=function(){var e,t,i=[];for(e=0;e<this.currentColors.length;e++)for(i.push([]),t=0;t<3;t++)i[e].push(this.currentColors[e][t]);return i}},{}],11:[function(e,t,i){"use strict";t.exports=function(){this.x1=this.canvas.offsetWidth,this.y1=this.canvas.offsetHeight}},{}],12:[function(e,t,i){"use strict";t.exports=function(e){if(e instanceof HTMLCanvasElement)this.canvas=e;else{if("string"!=typeof e)throw new Error("The element you used is neither a String, nor a HTMLCanvasElement");this.canvas=document.querySelector(e)}if(!this.canvas)throw new Error("`"+e+"` could not be found in the DOM")}},{}],13:[function(e,t,i){"use strict";t.exports=function(){var e,t,i=null,n=this.getCurrentColors().map(function(e){return Math.max(e[0],e[1],e[2])});for(t=0;t<n.length;t++)i=null===i?n[t]:i+n[t],t===n.length-1&&(e=Math.round(i/(t+1)));return e>=128?"light":"dark"}},{}],14:[function(e,t,i){"use strict";t.exports=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}},{}],15:[function(e,t,i){"use strict";t.exports=function(){var e,t,i=this.setDirection(),n=document.querySelector(this.elToSetClassOn).classList;for(this.shouldClearCanvasOnEachFrame&&this.context.clearRect(0,0,this.x1,this.y1),this.image&&this.context.drawImage(this.imageNode,this.imagePosition.x,this.imagePosition.y,this.imagePosition.width,this.imagePosition.height),e=0;e<this.currentColors.length;e++)t=e?(1/(this.currentColors.length-1)*e).toFixed(2):0,i.addColorStop(t,"rgba("+this.currentColors[e][0]+", "+this.currentColors[e][1]+", "+this.currentColors[e][2]+", "+this.opacity[e]+")");this.name&&("light"===this.getLightness()?(n.remove(this.name+"-dark"),n.add(this.name+"-light")):(n.remove(this.name+"-light"),n.add(this.name+"-dark"))),this.context.fillStyle=i,this.context.fillRect(0,0,this.x1,this.y1)}},{}],16:[function(e,t,i){"use strict";t.exports=function(e){return"removeListeners"===e?void window.removeEventListener("resize",this.setSizeAttributesNameSpace):void window.addEventListener("resize",this.setSizeAttributesNameSpace)}},{}],17:[function(e,t,i){"use strict";t.exports=function(e){return"removeListeners"===e?void window.removeEventListener("scroll",this.pauseWhenNotInViewNameSpace):(window.addEventListener("scroll",this.pauseWhenNotInViewNameSpace),void this.pauseWhenNotInViewNameSpace())}},{}],18:[function(e,t,i){"use strict";t.exports=function(e){this.isCleared||("isPausedBecauseNotInView"===e||(this.isPaused=!0),cancelAnimationFrame(this.animation),this.animating=!1)}},{}],19:[function(e,t,i){"use strict";t.exports=function(){var e=this;this.scrollDebounceTimeout&&clearTimeout(this.scrollDebounceTimeout),this.scrollDebounceTimeout=setTimeout(function(){var t=e.canvas.getBoundingClientRect();if(e.isCanvasInWindowView=!(t.bottom<0||t.right<0||t.left>window.innerWidth||t.top>window.innerHeight),e.isCanvasInWindowView){if(!e.isPaused||e.firstScrollInit){if(e.image&&!e.isImgLoaded)return;e.isPausedBecauseNotInView=!1,e.play("isPlayedBecauseInView"),e.firstScrollInit=!1}}else!e.image&&e.firstScrollInit&&(e.refreshColors(),e.firstScrollInit=!1),e.isPaused||e.isPausedBecauseNotInView||(e.isPausedBecauseNotInView=!0,e.pause("isPausedBecauseNotInView"))},this.scrollDebounceThreshold)}},{}],20:[function(e,t,i){"use strict";t.exports=function(e){"isPlayedBecauseInView"===e||(this.isPaused=!1),this.isCleared=!1,this.animating||(this.animation=requestAnimationFrame(this.animateColors.bind(this)),this.animating=!0)}},{}],21:[function(e,t,i){"use strict";t.exports=function(){function e(){function e(e){var i=t[e+"1"],n=t["x"===e?"imgOriginalWidth":"imgOriginalHeight"],r="x"===e?t.image.position[0]:t.image.position[1];switch(r){case"center":t.imagePosition[e]=n>i?-(n-i)/2:(i-n)/2,t.imagePosition["x"===e?"width":"height"]=n;break;case"top":t.imagePosition.y=0,t.imagePosition.height=n;break;case"bottom":t.imagePosition.y=i-n,t.imagePosition.height=n;break;case"right":t.imagePosition.x=i-n,t.imagePosition.width=n;break;case"left":t.imagePosition.x=0,t.imagePosition.width=n}if(t.image.stretchMode)switch(r="x"===e?t.image.stretchMode[0]:t.image.stretchMode[1]){case"stretch":t.imagePosition[e]=0,t.imagePosition["x"===e?"width":"height"]=i;break;case"stretch-if-bigger":if(n<i)break;t.imagePosition[e]=0,t.imagePosition["x"===e?"width":"height"]=i;break;case"stretch-if-smaller":if(n>i)break;t.imagePosition[e]=0,t.imagePosition["x"===e?"width":"height"]=i}}var i;for(i=0;i<2;i++)e(i?"y":"x")}var t=this;return this.imagePosition||(this.imagePosition={x:0,y:0,width:0,height:0}),this.image.blendingMode&&(this.context.globalCompositeOperation=this.image.blendingMode),this.imageNode?void e():(this.imageNode=new Image,this.imageNode.onerror=function(){throw new Error("Granim: The image source is invalid.")},this.imageNode.onload=function(){t.imgOriginalWidth=t.imageNode.width,t.imgOriginalHeight=t.imageNode.height,e(),t.refreshColors(),t.isPausedWhenNotInView&&!t.isCanvasInWindowView||(t.animation=requestAnimationFrame(t.animateColors.bind(t))),t.isImgLoaded=!0},void(this.imageNode.src=this.image.source))}},{}],22:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n,r=this;for(i=0;i<this.activeColors.length;i++)for(n=0;n<3;n++)(t=r.activeColors[i][n]+Math.ceil(r.activeColorDiff[i][n]/100*e))<=255&&t>=0&&(r.currentColors[i][n]=t);this.makeGradient()}},{}],23:[function(e,t,i){"use strict";t.exports=function(){var e,t,i=this;return this.channels[this.activeState]||(this.channels[this.activeState]=[]),void 0!==this.channels[this.activeState][this.channelsIndex]?(this.activeColors=this.channels[this.activeState][this.channelsIndex].colors,void(this.activeColorDiff=this.channels[this.activeState][this.channelsIndex].colorsDiff)):(this.channels[this.activeState].push([{}]),this.channels[this.activeState][this.channelsIndex].colors=[],this.channels[this.activeState][this.channelsIndex].colorsDiff=[],this.activeColors=[],this.activeColorDiff=[],this.states[this.activeState].gradients[this.channelsIndex].forEach(function(n,r){var o=i.hexToRgb(n),s=i.channels[i.activeState];s[i.channelsIndex].colors.push(o),i.activeColors.push(o),i.iscurrentColorsSet||i.currentColors.push(i.hexToRgb(n)),i.channelsIndex===i.states[i.activeState].gradients.length-1?e=i.colorDiff(s[i.channelsIndex].colors[r],s[0].colors[r]):(t=i.hexToRgb(i.states[i.activeState].gradients[i.channelsIndex+1][r]),e=i.colorDiff(s[i.channelsIndex].colors[r],t)),s[i.channelsIndex].colorsDiff.push(e),i.activeColorDiff.push(e)}),this.activetransitionSpeed=this.states[this.activeState].transitionSpeed||5e3,void(this.iscurrentColorsSet=!0))}},{}],24:[function(e,t,i){"use strict";t.exports=function(){var e=this.context;switch(this.direction){default:this.triggerError("direction");break;case"diagonal":return e.createLinearGradient(0,0,this.x1,this.y1);case"left-right":return e.createLinearGradient(0,0,this.x1,0);case"top-bottom":return e.createLinearGradient(this.x1/2,0,this.x1/2,this.y1);case"radial":return e.createRadialGradient(this.x1/2,this.y1/2,this.x1/2,this.x1/2,this.y1/2,0)}}},{}],25:[function(e,t,i){"use strict";t.exports=function(){this.getDimensions(),this.canvas.setAttribute("width",this.x1),this.canvas.setAttribute("height",this.y1),this.image&&this.prepareImage(),this.refreshColors()}},{}],26:[function(e,t,i){"use strict";t.exports=function(e){throw new Error('Granim: Input error on "'+e+'" option.\nCheck the API https://sarcadass.github.io/granim.js/api.html.')}},{}],27:[function(e,t,i){"use strict";t.exports=function(e){var t=["stretch","stretch-if-smaller","stretch-if-bigger"];switch(e){case"image":Array.isArray(this.image.position)&&2===this.image.position.length&&-1!==["left","center","right"].indexOf(this.image.position[0])&&-1!==["top","center","bottom"].indexOf(this.image.position[1])||this.triggerError("image.position"),this.image.stretchMode&&(Array.isArray(this.image.stretchMode)&&2===this.image.stretchMode.length&&-1!==t.indexOf(this.image.stretchMode[0])&&-1!==t.indexOf(this.image.stretchMode[1])||this.triggerError("image.stretchMode"));break;case"blendingMode":-1===["multiply","screen","normal","overlay","darken","lighten","lighter","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"].indexOf(this.image.blendingMode)&&(this.clear(),this.triggerError("blendingMode"))}}},{}],28:[function(e,t,i){window.Granim=e("./lib/Granim.js")},{"./lib/Granim.js":1}]},{},[28]),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ScrollReveal=t()}(this,function(){"use strict";var e={delay:0,distance:"0",duration:600,easing:"cubic-bezier(0.5, 0, 0, 1)",interval:0,opacity:0,origin:"bottom",rotate:{x:0,y:0,z:0},scale:1,cleanup:!1,container:document.documentElement,desktop:!0,mobile:!0,reset:!1,useDelay:"always",viewFactor:0,viewOffset:{top:0,right:0,bottom:0,left:0},afterReset:function(){},afterReveal:function(){},beforeReset:function(){},beforeReveal:function(){}},t={success:function(){document.documentElement.classList.add("sr"),document.body?document.body.style.height="100%":document.addEventListener("DOMContentLoaded",function(){document.body.style.height="100%"})},failure:function(){return document.documentElement.classList.remove("sr"),{clean:function(){},destroy:function(){},reveal:function(){},sync:function(){},get noop(){return!0}}}};function i(e){return"object"==typeof window.Node?e instanceof window.Node:null!==e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function n(e,t){if(void 0===t&&(t=document),e instanceof Array)return e.filter(i);if(i(e))return[e];if(n=e,r=Object.prototype.toString.call(n),"object"==typeof window.NodeList?n instanceof window.NodeList:null!==n&&"object"==typeof n&&"number"==typeof n.length&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(r)&&(0===n.length||i(n[0])))return Array.prototype.slice.call(e);var n,r;if("string"==typeof e)try{var o=t.querySelectorAll(e);return Array.prototype.slice.call(o)}catch(s){return[]}return[]}function r(e){return null!==e&&e instanceof Object&&(e.constructor===Object||"[object Object]"===Object.prototype.toString.call(e))}function o(e,t){if(r(e))return Object.keys(e).forEach(function(i){return t(e[i],i,e)});if(e instanceof Array)return e.forEach(function(i,n){return t(i,n,e)});throw new TypeError("Expected either an array or object literal.")}function s(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];if(this.constructor.debug&&console){var n="%cScrollReveal: "+e;t.forEach(function(e){return n+="\n \u2014 "+e}),console.log(n,"color: #ea654b;")}}function a(){var e=this,t={active:[],stale:[]},i={active:[],stale:[]},r={active:[],stale:[]};try{o(n("[data-sr-id]"),function(e){var i=parseInt(e.getAttribute("data-sr-id"));t.active.push(i)})}catch(s){throw s}o(this.store.elements,function(e){-1===t.active.indexOf(e.id)&&t.stale.push(e.id)}),o(t.stale,function(t){return delete e.store.elements[t]}),o(this.store.elements,function(e){-1===r.active.indexOf(e.containerId)&&r.active.push(e.containerId),e.hasOwnProperty("sequence")&&-1===i.active.indexOf(e.sequence.id)&&i.active.push(e.sequence.id)}),o(this.store.containers,function(e){-1===r.active.indexOf(e.id)&&r.stale.push(e.id)}),o(r.stale,function(t){var i=e.store.containers[t].node;i.removeEventListener("scroll",e.delegate),i.removeEventListener("resize",e.delegate),delete e.store.containers[t]}),o(this.store.sequences,function(e){-1===i.active.indexOf(e.id)&&i.stale.push(e.id)}),o(i.stale,function(t){return delete e.store.sequences[t]})}function c(e){var t,i=this;try{o(n(e),function(e){var n=e.getAttribute("data-sr-id");if(null!==n){t=!0;var r=i.store.elements[n];r.callbackTimer&&window.clearTimeout(r.callbackTimer.clock),e.setAttribute("style",r.styles.inline.generated),e.removeAttribute("data-sr-id"),delete i.store.elements[n]}})}catch(r){return s.call(this,"Clean failed.",r.message)}if(t)try{a.call(this)}catch(r){return s.call(this,"Clean failed.",r.message)}}function l(e){if(e.constructor!==Array)throw new TypeError("Expected array.");if(16===e.length)return e;if(6===e.length){var t=h();return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}throw new RangeError("Expected array with either 6 or 16 values.")}function h(){for(var e=[],t=0;t<16;t++)e.push(t%5==0?1:0);return e}function u(e,t){for(var i=l(e),n=l(t),r=[],o=0;o<4;o++)for(var s=[i[o],i[o+4],i[o+8],i[o+12]],a=0;a<4;a++){var c=4*a,h=[n[c],n[c+1],n[c+2],n[c+3]];r[o+c]=s[0]*h[0]+s[1]*h[1]+s[2]*h[2]+s[3]*h[3]}return r}var d=function(){var e={},t=document.documentElement.style;function i(i,n){if(void 0===n&&(n=t),i&&"string"==typeof i){if(e[i])return e[i];if("string"==typeof n[i])return e[i]=i;if("string"==typeof n["-webkit-"+i])return e[i]="-webkit-"+i;throw new RangeError('Unable to find "'+i+'" style property.')}throw new TypeError("Expected a string.")}return i.clearCache=function(){return e={}},i}();function f(e,t){void 0===t&&(t={});var i=!e.visible&&e.revealed&&e.config.reset;return t.reveal||e.visible&&!e.revealed?(function(e,t){var i=[e.styles.inline.generated,e.styles.opacity.computed,e.styles.transform.generated.final];i.push(t?e.styles.transition.generated.delayed:e.styles.transition.generated.instant),e.revealed=e.seen=!0,e.node.setAttribute("style",i.filter(function(e){return""!==e}).join(" ")),p.call(this,e,t)}).call(this,e,"always"===e.config.useDelay||"onload"===e.config.useDelay&&(t.pristine||this.pristine)||"once"===e.config.useDelay&&!e.seen):t.reset||i?(function(e){var t=[e.styles.inline.generated,e.styles.opacity.generated,e.styles.transform.generated.initial,e.styles.transition.generated.instant];e.revealed=!1,e.node.setAttribute("style",t.filter(function(e){return""!==e}).join(" ")),p.call(this,e)}).call(this,e):void 0}function p(e,t){var i=this,n=t?e.config.duration+e.config.delay:e.config.duration,r=e.revealed?e.config.beforeReveal:e.config.beforeReset,o=e.revealed?e.config.afterReveal:e.config.afterReset,s=0;e.callbackTimer&&(s=Date.now()-e.callbackTimer.start,window.clearTimeout(e.callbackTimer.clock)),r(e.node),e.callbackTimer={start:Date.now(),clock:window.setTimeout(function(){o(e.node),e.callbackTimer=null,e.revealed&&!e.config.reset&&e.config.cleanup&&c.call(i,e.node)},n-s)}}var g,m=(g=0,function(){return g++});function v(e,t){if(void 0===t&&(t=this.pristine),!e.visible&&e.revealed&&e.config.reset)return f.call(this,e,{reset:!0});var i=this.store.sequences[e.sequence.id],n=e.sequence.index;if(i){var r=new b(i,"visible",this.store),o=new b(i,"revealed",this.store);if(i.models={visible:r,revealed:o},!o.body.length){var s=this.store.elements[i.members[r.body[0]]];if(s)return w.call(this,i,r.body[0],-1,t),w.call(this,i,r.body[0],1,t),f.call(this,s,{reveal:!0,pristine:t})}if(!i.blocked.head&&n===[].concat(o.head).pop()&&n>=[].concat(r.body).shift())return w.call(this,i,n,-1,t),f.call(this,e,{reveal:!0,pristine:t});if(!i.blocked.foot&&n===[].concat(o.foot).shift()&&n<=[].concat(r.body).pop())return w.call(this,i,n,1,t),f.call(this,e,{reveal:!0,pristine:t})}}function y(e){var t=Math.abs(e);if(isNaN(t))throw new RangeError("Invalid sequence interval.");this.id=m(),this.interval=Math.max(t,16),this.members=[],this.models={},this.blocked={head:!1,foot:!1}}function b(e,t,i){var n=this;this.head=[],this.body=[],this.foot=[],o(e.members,function(e,r){var o=i.elements[e];o&&o[t]&&n.body.push(r)}),this.body.length&&o(e.members,function(e,r){var o=i.elements[e];o&&!o[t]&&(r<n.body[0]?n.head.push(r):n.foot.push(r))})}function w(e,t,i,n){var r=this,o=["head",null,"foot"][1+i],s=this.store.elements[e.members[t+i]];e.blocked[o]=!0,setTimeout(function(){e.blocked[o]=!1,s&&v.call(r,s,n)},e.interval)}function x(){var e=this;a.call(this),o(this.store.elements,function(e){var t=[e.styles.inline.generated];e.visible?(t.push(e.styles.opacity.computed),t.push(e.styles.transform.generated.final),e.revealed=!0):(t.push(e.styles.opacity.generated),t.push(e.styles.transform.generated.initial),e.revealed=!1),e.node.setAttribute("style",t.filter(function(e){return""!==e}).join(" "))}),o(this.store.containers,function(t){var i=t.node===document.documentElement?window:t.node;i.addEventListener("scroll",e.delegate),i.addEventListener("resize",e.delegate)}),this.delegate(),this.initTimeout=null}function S(e){return void 0===e&&(e=navigator.userAgent),/Android|iPhone|iPad|iPod/i.test(e)}function C(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];if(r(e))return o(t,function(t){o(t,function(t,i){r(t)?(e[i]&&r(e[i])||(e[i]={}),C(e[i],t)):e[i]=t})}),e;throw new TypeError("Target must be an object literal.")}function E(t,i,r){var a=this;void 0===i&&(i={}),void 0===r&&(r=!1);var f,p=[],g=i.interval||e.interval;try{g&&(f=new y(g));var v=n(t);if(!v.length)throw new Error("Invalid reveal target.");var b=v.reduce(function(e,t){var r={},s=t.getAttribute("data-sr-id");s?(C(r,a.store.elements[s]),r.node.setAttribute("style",r.styles.inline.computed)):(r.id=m(),r.node=t,r.seen=!1,r.revealed=!1,r.visible=!1);var g=C({},r.config||a.defaults,i);if(!g.mobile&&S()||!g.desktop&&!S())return s&&c.call(a,r),e;var v,y=n(g.container)[0];if(!y)throw new Error("Invalid container.");return y.contains(t)?(null===(v=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=null;return o(t,function(t){o(t,function(t){null===n&&t.node===e&&(n=t.id)})}),n}(y,p,a.store.containers))&&(v=m(),p.push({id:v,node:y})),r.config=g,r.containerId=v,r.styles=function(e){var t=window.getComputedStyle(e.node),i=t.position,n=e.config,r={},o=(e.node.getAttribute("style")||"").match(/[\w-]+\s*:\s*[^;]+\s*/gi)||[];r.computed=o?o.map(function(e){return e.trim()}).join("; ")+";":"",r.generated=o.some(function(e){return e.match(/visibility\s?:\s?visible/i)})?r.computed:o.concat(["visibility: visible"]).map(function(e){return e.trim()}).join("; ")+";";var s,a,c=parseFloat(t.opacity),f=isNaN(parseFloat(n.opacity))?parseFloat(t.opacity):parseFloat(n.opacity),p={computed:c!==f?"opacity: "+c+";":"",generated:c!==f?"opacity: "+f+";":""},g=[];if(parseFloat(n.distance)){var m="top"===n.origin||"bottom"===n.origin?"Y":"X",v=n.distance;"top"!==n.origin&&"left"!==n.origin||(v=/^-/.test(v)?v.substr(1):"-"+v);var y=v.match(/(^-?\d+\.?\d?)|(em$|px$|%$)/g),b=y[0];switch(y[1]){case"em":v=parseInt(t.fontSize)*b;break;case"px":v=b;break;case"%":v="Y"===m?e.node.getBoundingClientRect().height*b/100:e.node.getBoundingClientRect().width*b/100;break;default:throw new RangeError("Unrecognized or missing distance unit.")}g.push("Y"===m?function(e){var t=h();return t[13]=e,t}(v):function(e){var t=h();return t[12]=e,t}(v))}n.rotate.x&&g.push((s=Math.PI/180*n.rotate.x,(a=h())[5]=a[10]=Math.cos(s),a[6]=a[9]=Math.sin(s),a[9]*=-1,a)),n.rotate.y&&g.push(function(e){var t=Math.PI/180*n.rotate.y,i=h();return i[0]=i[10]=Math.cos(t),i[2]=i[8]=Math.sin(t),i[2]*=-1,i}()),n.rotate.z&&g.push(function(e){var t=Math.PI/180*n.rotate.z,i=h();return i[0]=i[5]=Math.cos(t),i[1]=i[4]=Math.sin(t),i[4]*=-1,i}()),1!==n.scale&&g.push(function(e,t){var i=h();return i[0]=e,i[5]=e,i}(0===n.scale?2e-4:n.scale));var w={};if(g.length){w.property=d("transform"),w.computed={raw:t[w.property],matrix:function(e){if("string"==typeof e){var t=e.match(/matrix(3d)?\(([^)]+)\)/);if(t)return l(t[2].split(", ").map(parseFloat))}return h()}(t[w.property])},g.unshift(w.computed.matrix);var x=g.reduce(u);w.generated={initial:w.property+": matrix3d("+x.join(", ")+");",final:w.property+": matrix3d("+w.computed.matrix.join(", ")+");"}}else w.generated={initial:"",final:""};var S={};if(p.generated||w.generated.initial){S.property=d("transition"),S.computed=t[S.property],S.fragments=[];var C=n.delay,E=n.duration,T=n.easing;p.generated&&S.fragments.push({delayed:"opacity "+E/1e3+"s "+T+" "+C/1e3+"s",instant:"opacity "+E/1e3+"s "+T+" 0s"}),w.generated.initial&&S.fragments.push({delayed:w.property+" "+E/1e3+"s "+T+" "+C/1e3+"s",instant:w.property+" "+E/1e3+"s "+T+" 0s"}),S.computed&&!S.computed.match(/all 0s/)&&S.fragments.unshift({delayed:S.computed,instant:S.computed});var j=S.fragments.reduce(function(e,t,i){return e.delayed+=0===i?t.delayed:", "+t.delayed,e.instant+=0===i?t.instant:", "+t.instant,e},{delayed:"",instant:""});S.generated={delayed:S.property+": "+j.delayed+";",instant:S.property+": "+j.instant+";"}}else S.generated={delayed:"",instant:""};return{inline:r,opacity:p,position:i,transform:w,transition:S}}(r),f&&(r.sequence={id:f.id,index:f.members.length},f.members.push(r.id)),e.push(r),e):e},[]);o(b,function(e){a.store.elements[e.id]=e,e.node.setAttribute("data-sr-id",e.id)})}catch(w){return s.call(this,"Reveal failed.",w.message)}o(p,function(e){a.store.containers[e.id]={id:e.id,node:e.node}}),f&&(this.store.sequences[f.id]=f),!0!==r&&(this.store.history.push({target:t,options:i}),this.initTimeout&&window.clearTimeout(this.initTimeout),this.initTimeout=window.setTimeout(x.bind(this),0))}var T,j=Math.sign||function(e){return(e>0)-(e<0)||+e},I=(T=Date.now(),function(e){var t=Date.now();t-T>16?(T=t,e(t)):setTimeout(function(){return I(e)},0)}),P=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||I;function L(e,t){var i=t?e.node.clientHeight:e.node.offsetHeight,n=t?e.node.clientWidth:e.node.offsetWidth,r=0,o=0,s=e.node;do{isNaN(s.offsetTop)||(r+=s.offsetTop),isNaN(s.offsetLeft)||(o+=s.offsetLeft),s=s.offsetParent}while(s);return{bounds:{top:r,right:o+n,bottom:r+i,left:o},height:i,width:n}}var A,N,O,k,D,F,z,M,R="4.0.5";function q(i){var r;if(void 0===i&&(i={}),void 0===this||Object.getPrototypeOf(this)!==q.prototype)return new q(i);if(!q.isSupported())return s.call(this,"Instantiation failed.","This browser is not supported."),t.failure();try{r=C({},F||e,i)}catch(a){return s.call(this,"Invalid configuration.",a.message),t.failure()}try{if(!n(r.container)[0])throw new Error("Invalid container.")}catch(a){return s.call(this,a.message),t.failure()}return!(F=r).mobile&&S()||!F.desktop&&!S()?(s.call(this,"This device is disabled.","desktop: "+F.desktop,"mobile: "+F.mobile),t.failure()):(t.success(),this.store={containers:{},elements:{},history:[],sequences:{}},this.pristine=!0,A=A||(function(e,t){var i=this;void 0===e&&(e={type:"init"}),void 0===t&&(t=this.store.elements),P(function(){var n="init"===e.type||"resize"===e.type;o(i.store.containers,function(e){n&&(e.geometry=L.call(i,e,!0));var t=(function(e){var t,i;return e.node===document.documentElement?(t=window.pageYOffset,i=window.pageXOffset):(t=e.node.scrollTop,i=e.node.scrollLeft),{top:t,left:i}}).call(i,e);e.scroll&&(e.direction={x:j(t.left-e.scroll.left),y:j(t.top-e.scroll.top)}),e.scroll=t}),o(t,function(e){n&&(e.geometry=L.call(i,e)),e.visible=(function(e){void 0===e&&(e={});var t=this.store.containers[e.containerId];if(t){var i=Math.max(0,Math.min(1,e.config.viewFactor)),n=e.config.viewOffset;return e.geometry.bounds.top+e.geometry.height*i<t.geometry.bounds.bottom+t.scroll.top-n.bottom&&e.geometry.bounds.right-e.geometry.width*i>t.geometry.bounds.left+t.scroll.left+n.left&&e.geometry.bounds.bottom-e.geometry.height*i>t.geometry.bounds.top+t.scroll.top+n.top&&e.geometry.bounds.left+e.geometry.width*i<t.geometry.bounds.right+t.scroll.left-n.right||"fixed"===e.styles.position}}).call(i,e)}),o(t,function(e){e.sequence?v.call(i,e):f.call(i,e)}),i.pristine=!1})}).bind(this),N=N||(function(){var e=this;o(this.store.elements,function(e){e.node.setAttribute("style",e.styles.inline.generated),e.node.removeAttribute("data-sr-id")}),o(this.store.containers,function(t){var i=t.node===document.documentElement?window:t.node;i.removeEventListener("scroll",e.delegate),i.removeEventListener("resize",e.delegate)}),this.store={containers:{},elements:{},history:[],sequences:{}}}).bind(this),O=O||E.bind(this),k=k||c.bind(this),D=D||(function(){var e=this;o(this.store.history,function(t){E.call(e,t.target,t.options,!0)}),x.call(this)}).bind(this),Object.defineProperty(this,"delegate",{get:function(){return A}}),Object.defineProperty(this,"destroy",{get:function(){return N}}),Object.defineProperty(this,"reveal",{get:function(){return O}}),Object.defineProperty(this,"clean",{get:function(){return k}}),Object.defineProperty(this,"sync",{get:function(){return D}}),Object.defineProperty(this,"defaults",{get:function(){return F}}),Object.defineProperty(this,"version",{get:function(){return R}}),Object.defineProperty(this,"noop",{get:function(){return!1}}),M||(M=this))}return q.isSupported=function(){return("transform"in(e=document.documentElement.style)||"WebkitTransform"in e)&&function(){var e=document.documentElement.style;return"transition"in e||"WebkitTransition"in e}();var e},Object.defineProperty(q,"debug",{get:function(){return z||!1},set:function(e){return z="boolean"==typeof e?e:z}}),q(),q}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.ScrollMagic=t()}(this,function(){"use strict";var e=function(){};e.version="2.0.6",window.addEventListener("mousewheel",function(){});var t="data-scrollmagic-pin-spacer";e.Controller=function(n){var o,s,a="REVERSE",c="PAUSED",l=i.defaults,h=this,u=r.extend({},l,n),d=[],f=!1,p=0,g=c,m=!0,v=0,y=!0,b=function(){u.refreshInterval>0&&(s=window.setTimeout(j,u.refreshInterval))},w=function(){return u.vertical?r.get.scrollTop(u.container):r.get.scrollLeft(u.container)},x=function(){return u.vertical?r.get.height(u.container):r.get.width(u.container)},S=this._setScrollPos=function(e){u.vertical?m?window.scrollTo(r.get.scrollLeft(),e):u.container.scrollTop=e:m?window.scrollTo(e,r.get.scrollTop()):u.container.scrollLeft=e},C=function(){if(y&&f){var e=r.type.Array(f)?f:d.slice(0);f=!1;var t=p,i=(p=h.scrollPos())-t;0!==i&&(g=i>0?"FORWARD":a),g===a&&e.reverse(),e.forEach(function(e){e.update(!0)})}},E=function(){o=r.rAF(C)},T=function(e){"resize"==e.type&&(v=x(),g=c),!0!==f&&(f=!0,E())},j=function(){if(!m&&v!=x()){var e;try{e=new Event("resize",{bubbles:!1,cancelable:!1})}catch(t){(e=document.createEvent("Event")).initEvent("resize",!1,!1)}u.container.dispatchEvent(e)}d.forEach(function(e){e.refresh()}),b()};this._options=u;var I=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){if(r.type.Array(t))t.forEach(function(e){h.addScene(e)});else if(t instanceof e.Scene)if(t.controller()!==h)t.addTo(h);else if(d.indexOf(t)<0)for(var i in d.push(t),d=I(d),t.on("shift.controller_sort",function(){d=I(d)}),u.globalSceneOptions)t[i]&&t[i].call(t,u.globalSceneOptions[i]);return h},this.removeScene=function(e){if(r.type.Array(e))e.forEach(function(e){h.removeScene(e)});else{var t=d.indexOf(e);t>-1&&(e.off("shift.controller_sort"),d.splice(t,1),e.remove())}return h},this.updateScene=function(t,i){return r.type.Array(t)?t.forEach(function(e){h.updateScene(e,i)}):i?t.update(!0):!0!==f&&t instanceof e.Scene&&(-1==(f=f||[]).indexOf(t)&&f.push(t),f=I(f),E()),h},this.update=function(e){return T({type:"resize"}),e&&C(),h},this.scrollTo=function(i,n){if(r.type.Number(i))S.call(u.container,i,n);else if(i instanceof e.Scene)i.controller()===h&&h.scrollTo(i.scrollOffset(),n);else if(r.type.Function(i))S=i;else{var o=r.get.elements(i)[0];if(o){for(;o.parentNode.hasAttribute(t);)o=o.parentNode;var s=u.vertical?"top":"left",a=r.get.offset(u.container),c=r.get.offset(o);m||(a[s]-=h.scrollPos()),h.scrollTo(c[s]-a[s],n)}}return h},this.scrollPos=function(e){return arguments.length?(r.type.Function(e)&&(w=e),h):w.call(h)},this.info=function(e){var t={size:v,vertical:u.vertical,scrollPos:p,scrollDirection:g,container:u.container,isDocument:m};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(){return h},this.enabled=function(e){return arguments.length?(y!=e&&(y=!!e,h.updateScene(d,!0)),h):y},this.destroy=function(e){window.clearTimeout(s);for(var t=d.length;t--;)d[t].destroy(e);return u.container.removeEventListener("resize",T),u.container.removeEventListener("scroll",T),r.cAF(o),null},function(){for(var e in u)l.hasOwnProperty(e)||delete u[e];if(u.container=r.get.elements(u.container)[0],!u.container)throw"ScrollMagic.Controller init failed.";(m=u.container===window||u.container===document.body||!document.body.contains(u.container))&&(u.container=window),v=x(),u.container.addEventListener("resize",T),u.container.addEventListener("scroll",T);var t=parseInt(u.refreshInterval,10);u.refreshInterval=r.type.Number(t)?t:l.refreshInterval,b()}(),h};var i={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};e.Controller.addOption=function(e,t){i.defaults[e]=t},e.Controller.extend=function(t){var i=this;e.Controller=function(){return i.apply(this,arguments),this.$super=r.extend({},this),t.apply(this,arguments)||this},r.extend(e.Controller,i),(e.Controller.prototype=i.prototype).constructor=e.Controller},e.Scene=function(i){var o,s,a="BEFORE",c="DURING",l="AFTER",h=n.defaults,u=this,d=r.extend({},h,i),f=a,p=0,g={start:0,end:0},m=0,v=!0,y={};this.on=function(e,t){return r.type.Function(t)&&(e=e.trim().split(" ")).forEach(function(e){var i=e.split("."),n=i[0],r=i[1];"*"!=n&&(y[n]||(y[n]=[]),y[n].push({namespace:r||"",callback:t}))}),u},this.off=function(e,t){return e?((e=e.trim().split(" ")).forEach(function(e){var i=e.split("."),n=i[0],r=i[1]||"";("*"===n?Object.keys(y):[n]).forEach(function(e){for(var i=y[e]||[],n=i.length;n--;){var o=i[n];!o||r!==o.namespace&&"*"!==r||t&&t!=o.callback||i.splice(n,1)}i.length||delete y[e]})}),u):u},this.trigger=function(t,i){if(t){var n=t.trim().split("."),r=n[0],o=n[1],s=y[r];s&&s.forEach(function(t){o&&o!==t.namespace||t.callback.call(u,new e.Event(r,t.namespace,u,i))})}return u},u.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?C():"reverse"===e.what&&u.update())}).on("shift.internal",function(){x(),u.update()}),this.addTo=function(t){return t instanceof e.Controller&&s!=t&&(s&&s.removeScene(u),s=t,j(),S(!0),C(!0),x(),s.info("container").addEventListener("resize",E),t.addScene(u),u.trigger("add",{controller:s}),u.update()),u},this.enabled=function(e){return arguments.length?(v!=e&&(v=!!e,u.update(!0)),u):v},this.remove=function(){if(s){s.info("container").removeEventListener("resize",E);var e=s;s=void 0,e.removeScene(u),u.trigger("remove")}return u},this.destroy=function(e){return u.trigger("destroy",{reset:e}),u.remove(),u.off("*.*"),null},this.update=function(e){if(s)if(e)if(s.enabled()&&v){var t,i=s.info("scrollPos");t=d.duration>0?(i-g.start)/(g.end-g.start):i>=g.start?1:0,u.trigger("update",{startPos:g.start,endPos:g.end,scrollPos:i}),u.progress(t)}else b&&f===c&&L(!0);else s.updateScene(u,!1);return u},this.refresh=function(){return S(),C(),u},this.progress=function(e){if(arguments.length){var t=!1,i=f,n=s?s.info("scrollDirection"):"PAUSED",r=d.reverse||e>=p;if(0===d.duration?(t=p!=e,f=0==(p=1>e&&r?0:1)?a:c):0>e&&f!==a&&r?(p=0,f=a,t=!0):e>=0&&1>e&&r?(p=e,f=c,t=!0):e>=1&&f!==l?(p=1,f=l,t=!0):f!==c||r||L(),t){var o={progress:p,state:f,scrollDirection:n},h=f!=i,g=function(e){u.trigger(e,o)};h&&i!==c&&(g("enter"),g(i===a?"start":"end")),g("progress"),h&&f!==c&&(g(f===a?"start":"end"),g("leave"))}return u}return p};var b,w,x=function(){g={start:m+d.offset},s&&d.triggerElement&&(g.start-=s.info("size")*d.triggerHook),g.end=g.start+d.duration},S=function(e){if(o){var t="duration";I(t,o.call(u))&&!e&&(u.trigger("change",{what:t,newval:d[t]}),u.trigger("shift",{reason:t}))}},C=function(e){var i=0,n=d.triggerElement;if(s&&(n||m>0)){if(n)if(n.parentNode){for(var o=s.info(),a=r.get.offset(o.container),c=o.vertical?"top":"left";n.parentNode.hasAttribute(t);)n=n.parentNode;var l=r.get.offset(n);o.isDocument||(a[c]-=s.scrollPos()),i=l[c]-a[c]}else u.triggerElement(void 0);var h=i!=m;m=i,h&&!e&&u.trigger("shift",{reason:"triggerElementPosition"})}},E=function(){d.triggerHook>0&&u.trigger("shift",{reason:"containerResize"})},T=r.extend(n.validate,{duration:function(e){if(r.type.String(e)&&e.match(/^(\.|\d)*\d+%$/)){var t=parseFloat(e)/100;e=function(){return s?s.info("size")*t:0}}if(r.type.Function(e)){o=e;try{e=parseFloat(o())}catch(i){e=-1}}if(e=parseFloat(e),!r.type.Number(e)||0>e)throw o?(o=void 0,0):0;return e}}),j=function(e){(e=arguments.length?[e]:Object.keys(T)).forEach(function(e){var t;if(T[e])try{t=T[e](d[e])}catch(i){t=h[e]}finally{d[e]=t}})},I=function(e,t){var i=!1,n=d[e];return d[e]!=t&&(d[e]=t,j(e),i=n!=d[e]),i},P=function(e){u[e]||(u[e]=function(t){return arguments.length?("duration"===e&&(o=void 0),I(e,t)&&(u.trigger("change",{what:e,newval:d[e]}),n.shifts.indexOf(e)>-1&&u.trigger("shift",{reason:e})),u):d[e]})};this.controller=function(){return s},this.state=function(){return f},this.scrollOffset=function(){return g.start},this.triggerPosition=function(){var e=d.offset;return s&&(e+=d.triggerElement?m:s.info("size")*u.triggerHook()),e},u.on("shift.internal",function(e){var t="duration"===e.reason;(f===l&&t||f===c&&0===d.duration)&&L(),t&&A()}).on("progress.internal",function(){L()}).on("add.internal",function(){A()}).on("destroy.internal",function(e){u.removePin(e.reset)});var L=function(e){if(b&&s){var t=s.info(),i=w.spacer.firstChild;if(e||f!==c){var n={position:w.inFlow?"relative":"absolute",top:0,left:0},o=r.css(i,"position")!=n.position;w.pushFollowers?d.duration>0&&(f===l&&0===parseFloat(r.css(w.spacer,"padding-top"))?o=!0:f===a&&0===parseFloat(r.css(w.spacer,"padding-bottom"))&&(o=!0)):n[t.vertical?"top":"left"]=d.duration*p,r.css(i,n),o&&A()}else{"fixed"!=r.css(i,"position")&&(r.css(i,{position:"fixed"}),A());var h=r.get.offset(w.spacer,!0),u=d.reverse||0===d.duration?t.scrollPos-g.start:Math.round(p*d.duration*10)/10;h[t.vertical?"top":"left"]+=u,r.css(w.spacer.firstChild,{top:h.top,left:h.left})}}},A=function(){if(b&&s&&w.inFlow){var e=f===c,t=s.info("vertical"),i=w.spacer.firstChild,n=r.isMarginCollapseType(r.css(w.spacer,"display")),o={};w.relSize.width||w.relSize.autoFullWidth?r.css(b,e?{width:r.get.width(w.spacer)}:{width:"100%"}):(o["min-width"]=r.get.width(t?b:i,!0,!0),o.width=e?o["min-width"]:"auto"),w.relSize.height?r.css(b,e?{height:r.get.height(w.spacer)-(w.pushFollowers?d.duration:0)}:{height:"100%"}):(o["min-height"]=r.get.height(t?i:b,!0,!n),o.height=e?o["min-height"]:"auto"),w.pushFollowers&&(o["padding"+(t?"Top":"Left")]=d.duration*p,o["padding"+(t?"Bottom":"Right")]=d.duration*(1-p)),r.css(w.spacer,o)}},N=function(){s&&b&&f===c&&!s.info("isDocument")&&L()},O=function(){s&&b&&f===c&&((w.relSize.width||w.relSize.autoFullWidth)&&r.get.width(window)!=r.get.width(w.spacer.parentNode)||w.relSize.height&&r.get.height(window)!=r.get.height(w.spacer.parentNode))&&A()},k=function(e){s&&b&&f===c&&!s.info("isDocument")&&(e.preventDefault(),s._setScrollPos(s.info("scrollPos")-((e.wheelDelta||e[s.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-e.detail)))};this.setPin=function(e,i){if(i=r.extend({},{pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"},i),!(e=r.get.elements(e)[0]))return u;if("fixed"===r.css(e,"position"))return u;if(b){if(b===e)return u;u.removePin()}var n=(b=e).parentNode.style.display,o=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];b.parentNode.style.display="none";var s="absolute"!=r.css(b,"position"),a=r.css(b,o.concat(["display"])),c=r.css(b,["width","height"]);b.parentNode.style.display=n,!s&&i.pushFollowers&&(i.pushFollowers=!1);var l=b.parentNode.insertBefore(document.createElement("div"),b),h=r.extend(a,{position:s?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(s||r.extend(h,r.css(b,["width","height"])),r.css(l,h),l.setAttribute(t,""),r.addClass(l,i.spacerClass),w={spacer:l,relSize:{width:"%"===c.width.slice(-1),height:"%"===c.height.slice(-1),autoFullWidth:"auto"===c.width&&s&&r.isMarginCollapseType(a.display)},pushFollowers:i.pushFollowers,inFlow:s},!b.___origStyle){b.___origStyle={};var d=b.style;o.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]).forEach(function(e){b.___origStyle[e]=d[e]||""})}return w.relSize.width&&r.css(l,{width:c.width}),w.relSize.height&&r.css(l,{height:c.height}),l.appendChild(b),r.css(b,{position:s?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(w.relSize.width||w.relSize.autoFullWidth)&&r.css(b,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",N),window.addEventListener("resize",N),window.addEventListener("resize",O),b.addEventListener("mousewheel",k),b.addEventListener("DOMMouseScroll",k),L(),u},this.removePin=function(e){if(b){if(f===c&&L(!0),e||!s){var i=w.spacer.firstChild;if(i.hasAttribute(t)){var n=w.spacer.style,o={};["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach(function(e){o[e]=n[e]||""}),r.css(i,o)}w.spacer.parentNode.insertBefore(i,w.spacer),w.spacer.parentNode.removeChild(w.spacer),b.parentNode.hasAttribute(t)||(r.css(b,b.___origStyle),delete b.___origStyle)}window.removeEventListener("scroll",N),window.removeEventListener("resize",N),window.removeEventListener("resize",O),b.removeEventListener("mousewheel",k),b.removeEventListener("DOMMouseScroll",k),b=void 0}return u};var D,F=[];return u.on("destroy.internal",function(e){u.removeClassToggle(e.reset)}),this.setClassToggle=function(e,t){var i=r.get.elements(e);return 0!==i.length&&r.type.String(t)?(F.length>0&&u.removeClassToggle(),D=t,F=i,u.on("enter.internal_class leave.internal_class",function(e){var t="enter"===e.type?r.addClass:r.removeClass;F.forEach(function(e){t(e,D)})}),u):u},this.removeClassToggle=function(e){return e&&F.forEach(function(e){r.removeClass(e,D)}),u.off("start.internal_class end.internal_class"),D=void 0,F=[],u},function(){for(var e in d)h.hasOwnProperty(e)||delete d[e];for(var t in h)P(t);j()}(),u};var n={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(e){if(e=parseFloat(e),!r.type.Number(e))throw 0;return e},triggerElement:function(e){if(e=e||void 0){var t=r.get.elements(e)[0];if(!t||!t.parentNode)throw 0;e=t}return e},triggerHook:function(e){var t={onCenter:.5,onEnter:1,onLeave:0};if(r.type.Number(e))e=Math.max(0,Math.min(parseFloat(e),1));else{if(!(e in t))throw 0;e=t[e]}return e},reverse:function(e){return!!e}},shifts:["duration","offset","triggerHook"]};e.Scene.addOption=function(e,t,i,r){e in n.defaults||(n.defaults[e]=t,n.validate[e]=i,r&&n.shifts.push(e))},e.Scene.extend=function(t){var i=this;e.Scene=function(){return i.apply(this,arguments),this.$super=r.extend({},this),t.apply(this,arguments)||this},r.extend(e.Scene,i),(e.Scene.prototype=i.prototype).constructor=e.Scene},e.Event=function(e,t,i,n){for(var r in n=n||{})this[r]=n[r];return this.type=e,this.target=this.currentTarget=i,this.namespace=t||"",this.timeStamp=this.timestamp=Date.now(),this};var r=e._util=function(e){var t,i={},n=function(e){return parseFloat(e)||0},r=function(t){return t.currentStyle?t.currentStyle:e.getComputedStyle(t)},o=function(t,i,o,s){if((i=i===document?e:i)===e)s=!1;else if(!u.DomElement(i))return 0;t=t.charAt(0).toUpperCase()+t.substr(1).toLowerCase();var a=(o?i["offset"+t]||i["outer"+t]:i["client"+t]||i["inner"+t])||0;if(o&&s){var c=r(i);a+="Height"===t?n(c.marginTop)+n(c.marginBottom):n(c.marginLeft)+n(c.marginRight)}return a},s=function(e){return e.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};i.extend=function(e){for(e=e||{},t=1;t<arguments.length;t++)if(arguments[t])for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&(e[i]=arguments[t][i]);return e},i.isMarginCollapseType=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1};var a=0,c=["ms","moz","webkit","o"],l=e.requestAnimationFrame,h=e.cancelAnimationFrame;for(t=0;!l&&t<c.length;++t)l=e[c[t]+"RequestAnimationFrame"],h=e[c[t]+"CancelAnimationFrame"]||e[c[t]+"CancelRequestAnimationFrame"];l||(l=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),r=e.setTimeout(function(){t(i+n)},n);return a=i+n,r}),h||(h=function(t){e.clearTimeout(t)}),i.rAF=l.bind(e),i.cAF=h.bind(e);var u=i.type=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};u.String=function(e){return"string"===u(e)},u.Function=function(e){return"function"===u(e)},u.Array=function(e){return Array.isArray(e)},u.Number=function(e){return!u.Array(e)&&e-parseFloat(e)+1>=0},u.DomElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};var d=i.get={};return d.elements=function(t){var i=[];if(u.String(t))try{t=document.querySelectorAll(t)}catch(n){return i}if("nodelist"===u(t)||u.Array(t))for(var r=0,o=i.length=t.length;o>r;r++){var s=t[r];i[r]=u.DomElement(s)?s:d.elements(s)}else(u.DomElement(t)||t===document||t===e)&&(i=[t]);return i},d.scrollTop=function(t){return t&&"number"==typeof t.scrollTop?t.scrollTop:e.pageYOffset||0},d.scrollLeft=function(t){return t&&"number"==typeof t.scrollLeft?t.scrollLeft:e.pageXOffset||0},d.width=function(e,t,i){return o("width",e,t,i)},d.height=function(e,t,i){return o("height",e,t,i)},d.offset=function(e,t){var i={top:0,left:0};if(e&&e.getBoundingClientRect){var n=e.getBoundingClientRect();i.top=n.top,i.left=n.left,t||(i.top+=d.scrollTop(),i.left+=d.scrollLeft())}return i},i.addClass=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},i.removeClass=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},i.css=function(e,t){if(u.String(t))return r(e)[s(t)];if(u.Array(t)){var i={},n=r(e);return t.forEach(function(e){i[e]=n[s(e)]}),i}for(var o in t){var a=t[o];a==parseFloat(a)&&(a+="px"),e.style[s(o)]=a}},i}(window||{});return e});